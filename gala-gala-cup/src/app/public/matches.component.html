<div class="page matches">
  <header class="masthead">
    <div>
      <p class="eyebrow">Matchs</p>
      <h2>Planning clair, scores en direct.</h2>
      <p class="muted">
        Prochains matchs, live et résultats récents dans une vue unique.
      </p>
    </div>
    <div class="filters">
      <span class="chip ghost">Alertes push activées</span>
      <span class="chip">{{ upcomingMatches.length }} à venir</span>
      <span class="chip">{{ inProgressMatches.length }} en cours</span>
    </div>
  </header>

  <section class="section">
    <div class="section__head">
      <h3>À venir</h3>
      <span class="tag">Prochaines rencontres</span>
    </div>
    <div *ngIf="upcomingTournaments.length && !upcomingMatches.length" class="muted">
      Tournois à venir : 
      <span *ngFor="let t of upcomingTournaments; let last = last">
        {{ t.name }} ({{ t.date | date: 'dd MMM yyyy' }})<span *ngIf="!last">, </span>
      </span>
    </div>
    <div *ngIf="loading" class="muted">Chargement...</div>
    <div *ngIf="error" class="error">{{ error }}</div>
    <div *ngIf="!loading && !error && !upcomingMatches.length" class="empty">Aucun match programmé.</div>
    <div class="match-grid" *ngIf="!loading && !error && upcomingMatches.length">
      <article *ngFor="let match of upcomingMatches" class="card">
        <div class="teams">
          <span>{{ match.teamA }}</span>
          <strong>vs</strong>
          <span>{{ match.teamB }}</span>
        </div>
        <div class="meta">
          <span class="label">
            {{
              match.status === 'in_progress'
                ? 'En cours'
                : match.status === 'finished'
                ? 'Terminé'
                : 'À venir'
            }}
          </span>
          <span class="muted">{{ match.startTime | date: 'dd MMM yyyy · HH:mm' }}</span>
        </div>
      </article>
    </div>
  </section>

  <section class="section" *ngIf="!loading && !error">
    <div class="section__head">
      <h3>En cours</h3>
      <span class="tag ghost">Live</span>
    </div>
    <div *ngIf="!inProgressMatches.length" class="empty">Aucun match en cours.</div>
    <div class="match-grid" *ngIf="inProgressMatches.length">
      <article *ngFor="let match of inProgressMatches" class="card">
        <div class="teams">
          <span>{{ match.teamA }}</span>
          <strong>{{ match.scoreA ?? '-' }} - {{ match.scoreB ?? '-' }}</strong>
          <span>{{ match.teamB }}</span>
        </div>
        <div class="meta">
          <span class="label">En cours</span>
          <span class="muted">{{ match.startTime | date: 'dd MMM yyyy · HH:mm' }}</span>
        </div>
      </article>
    </div>
  </section>

  <section class="section">
    <div class="section__head">
      <h3>Résultats</h3>
      <span class="tag ghost">Derniers scores</span>
    </div>
    <div *ngIf="!loading && !error && !pastMatches.length" class="empty">Aucun match terminé.</div>
    <div class="match-grid" *ngIf="!loading && !error && pastMatches.length">
      <article *ngFor="let match of pastMatches" class="card">
        <div class="teams">
          <span>{{ match.teamA }}</span>
          <strong>{{ match.scoreA ?? '-' }} - {{ match.scoreB ?? '-' }}</strong>
          <span>{{ match.teamB }}</span>
        </div>
        <div class="meta">
          <span class="label dark">
            {{ match.status === 'in_progress' ? 'En cours' : 'Terminé' }}
          </span>
          <span class="muted">{{ match.startTime | date: 'dd MMM yyyy · HH:mm' }}</span>
        </div>
      </article>
    </div>
  </section>
</div>
