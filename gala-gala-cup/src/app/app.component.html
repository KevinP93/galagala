<div class="app-shell" (touchstart)="onTouchStart($event)" (touchmove)="onTouchMove($event)" (touchend)="onTouchEnd()">
  <header class="topbar">
    <div class="brand">
      <img src="galaLogo.png" alt="GalaGala logo" class="brand__logo" />
      <div>
        <a routerLink="/" class="brand__name" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">
          GalaGala CUP
        </a>
      </div>
    </div>
    <ng-container *ngIf="isLoggedIn">
      <button class="burger" [class.open]="menuOpen" (click)="toggleMenu()" aria-label="Ouvrir le menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
      <nav class="nav" [class.open]="menuOpen">
        <a routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }" (click)="closeMenu()">Accueil</a>
        <a routerLink="/matches" routerLinkActive="active" (click)="closeMenu()">Matchs</a>
        <a routerLink="/listes" routerLinkActive="active" (click)="closeMenu()">Listes</a>
        <a routerLink="/historique" routerLinkActive="active" (click)="closeMenu()">Historique</a>
        <a *ngIf="isAdmin" routerLink="/admin" routerLinkActive="active" class="nav-link" (click)="closeMenu()">Admin</a>

        <button type="button" class="logout-btn" (click)="logout(); closeMenu()">
          <span class="icon">O</span>
          Se deconnecter
        </button>
      </nav>
    </ng-container>
  </header>

  <div class="notif-banner" *ngIf="showNotifPrompt">
    <div class="notif-banner__text">
      <p class="eyebrow">Notifications</p>
      <p class="title">Active les alertes match et annonces.</p>
      <p class="muted tiny">Une seule question, tu peux changer d'avis dans les reglages du navigateur.</p>
      <p class="error" *ngIf="notifPromptError">{{ notifPromptError }}</p>
    </div>
    <div class="notif-banner__actions">
      <button type="button" class="btn ghost sm" (click)="declineNotifPrompt()">Plus tard</button>
      <button type="button" class="btn dark sm" [disabled]="notifPromptBusy" (click)="acceptNotifPrompt()">
        {{ notifPromptBusy ? 'Activation...' : 'Activer' }}
      </button>
    </div>
  </div>

  <main class="content">
    <router-outlet></router-outlet>
  </main>

  <footer class="footer">
    <p class="muted">Created by K-WebDesign</p>
  </footer>
</div>
